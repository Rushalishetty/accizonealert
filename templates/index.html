<!DOCTYPE html>
<html>
<head>
    <title>Accident Zone Alert</title>
    <link rel="stylesheet" href="css/master.css">
    <meta name="viewport" content="width=device-width,intial-scale=1,shrink-to-fit=no">
    <meta name="robots" content="noindex,nofollow">
</head>
<body onload="JavaScript:AutoRefresh(10000);">
<img src="https://cdn.pixabay.com/photo/2017/06/04/16/33/road-2371503_1280.jpg" width="100%" height="80%">
<h2 style="color:#075AAB;"><center>You are safe in mother's earth</center></h2>
<button style="visibility:hidden; width: 0px; min-width: 0px;" id="but1" onclick="startTimer()">Start Timer</button>
<button style="visibility:hidden; width: 0px; min-width: 0px;" onclick="stopTimer()">Stop Timer</button>
<form method="POST", action="{{url_for('predict')}}">
  <b><input type="hidden" id="longitude" name='longitude' />
    <input type="hidden" id="latitude" name='latitude' />
    <button style="visibility:hidden; width: 0px; min-width: 0px;" type="submit" id="dataRefreshButton" class="btn">predict</button>
</form>
<p id="demo"></p>
<script>
var x = document.getElementById("demo");
var i=1;
function startTimer(form) {
  setInterval(function(){
  getLocation();
  i++;
  }, 6000);
}
function stopTimer() {
  alert("Timer stopped");
  clearInterval(timer);
  window.top.close();
}

function getLocation(form) {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition);

  } else {
    x.innerHTML = "Geolocation is not supported by this browser.";
  }
}

function showPosition(position,form) {
  document.getElementById("longitude").value = position.coords.longitude;
  document.getElementById("latitude").value = position.coords.latitude;
  document.getElementById('dataRefreshButton').click();
}
function AutoRefresh( t ) {
              setTimeout("location.reload(true);", t);
              document.getElementById('but1').click();
           }
</script>

</body>
</html>
